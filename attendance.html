<!DOCTYPE html>
<html lang="ko">
<body>
    <header>
        <a href="student-dashboard.html" style="color: #333; font-size: 24px;">🏠</a> <!-- 흰색 집 아이콘 -->
        
        <div class="hamburger" id="hamburger">
            <div></div>
            <div></div>
            <div></div>
        </div>

        <nav>
            <a href="attendance.html">출결현황</a> <!-- 출결현황 링크 -->
            <a href="#menu2">메뉴2</a>
            <a href="#menu3">메뉴3</a>
            <a href="#menu4">메뉴4</a>
            <a href="#menu5">메뉴5</a>
            <a href="#menu6">메뉴6</a>
        </nav>

        <div id="mobile-menu">
            <a href="attendance.html">출결현황</a>
            <a href="#menu2">메뉴2</a>
            <a href="#menu3">메뉴3</a>
            <a href="#menu4">메뉴4</a>
            <a href="#menu5">메뉴5</a>
            <a href="#menu6">메뉴6</a>
        </div>

        <div id="student-info">
            <span id="seatNameDisplay"></span>
            <div class="separator"></div>
            <span id="nameDisplay"></span>
            <div class="separator"></div>
            <span id="gradeDisplay"></span>
            <button id="logout-btn">로그아웃</button>
        </div>
    </header>

    <h1>출결현황</h1>

    <div id="content">
        <div id="attendance-content">
            <table id="attendance-data">
                <thead>
                    <tr class="header-row">
                        <td style="width: 10%;">자리번호</td>
                        <td style="width: 20%;">이름</td>
                        <td style="width: 10%;">학년</td>
                        <td style="width: 20%;">출결상태</td>
                        <td style="width: 20%;">날짜</td>
                        <td style="width: 20%;">시간</td>
                    </tr>
                </thead>
                <tbody>
                    <!-- 출결 데이터가 여기에 표시됩니다. -->
                </tbody>
            </table>
        </div>
    </div>

    <script>
        const studentName = localStorage.getItem('studentName');
        const studentSeatNumber = localStorage.getItem('studentSeatNumber');
        const studentGrade = localStorage.getItem('studentGrade');

        if (studentName) {
            document.getElementById('seatNameDisplay').innerText = `자리번호: ${studentSeatNumber}`;
            document.getElementById('nameDisplay').innerText = `이름: ${studentName}`;
            document.getElementById('gradeDisplay').innerText = `학년: ${studentGrade}`;
        } else {
            window.location.href = 'index.html';
        }

        document.getElementById('hamburger').addEventListener('click', () => {
            const mobileMenu = document.getElementById('mobile-menu');
            mobileMenu.classList.toggle('active');
        });

        document.getElementById('logout-btn').addEventListener('click', () => {
            localStorage.clear();
            window.location.href = 'index.html';
        });

        // 구글 시트에서 출결 데이터 불러오기
        async function fetchAttendanceData() {
            const sheetId = '199CxKW0EHGTVHMwDIEmNJ5LsOcPxyFUtQv52osl7jTY'; // 기존 시트 ID
            const range = '출결!A:S'; // 시트 이름과 범위
            const apiKey = 'AIzaSyDeS-WjQLmzG7yw1_GWu5Tw3HwFxG5hYbk'; // 기존 API 키

            const response = await fetch(`https://sheets.googleapis.com/v4/spreadsheets/${sheetId}/values/${range}?key=${apiKey}`);
            const data = await response.json();

            if (data.values && data.values.length > 0) {
                const attendanceDataContainer = document.getElementById('attendance-data').getElementsByTagName('tbody')[0];
                data.values.forEach((row) => {
                    const newRow = attendanceDataContainer.insertRow(); // 새 행 추가
                    row.forEach(cell => {
                        const newCell = newRow.insertCell(); // 새 셀 추가
                        newCell.innerText = cell; // 셀 내용 설정
                    });
                });
            }
        }

        // 데이터 불러오기 함수 호출
        fetchAttendanceData();
    </script>
</body>
</html>
